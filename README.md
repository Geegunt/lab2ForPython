## Введение
Проект — учебная мини‑оболочка (командный интерпретатор) на Python. Она умеет выполнять базовые команды файловой системы (`ls`, `cd`, `cat`, `cp`, `mv`, `rm`), работать с архивами (`zip/unzip`, `tar/untar`), искать по файлам (`grep`), вести историю команд (`history`) и откатывать операции (`undo`).

Код предельно простой и понятный — с прицелом на «написал школьник», чтобы легче было разбирать и менять.

## Структура проекта

 <pre>
    .
    ├── src/                               # Исходный код
    │   ├── main.py                        # Точка входа (цикл ввода команд)
    │   ├── parser.py                      # Разбор введенных команд
    │   ├── config.py                      # Конфигурация (константы)
    │   ├── history.py                     # История команд и undo-стек
    │   ├── logger.py                      # Настройка логирования
    │   └── commands/                      # Реализации команд
    │       ├── ls.py, cd.py, cat.py, ...
    │       ├── zip_cmd.py, tar_cmd.py
    │       └── undo.py, grep.py
    ├── tests/                             # Unit-тесты (pytest)
    ├── pyproject.toml                     # Зависимости (опционально через uv)
    ├── requirements.txt                   # Зависимости (через pip)
    └── uv.lock                            # Блокировочный файл uv
 </pre>

## Требования к коду (кратко по шаблону)
- Имена в `snake_case`; классы — в PascalCase.
- Константы — в отдельных файлах (здесь `src/config.py`).
- Функции и классы с понятными именами, без лишней вложенности.
- Поддерживайте единый стиль отступов и читаемость кода.

## Установка и запуск

### Вариант с venv + pip
```bash
cd "/Users/glebgrigorev/Desktop/programming/python-labs-2"
python3 -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
```

### Вариант с uv
```bash
cd "/Users/glebgrigorev/Desktop/programming/python-labs-2"
uv venv
source .venv/bin/activate
uv pip install -e .
```

### Запуск оболочки
```bash
python -m src.main
```

## Как пользоваться
После запуска вы увидите приглашение вида `<текущая_папка>$`. Вводите команды как в терминале.

### Доступные команды
- **ls [путь] [-l]**: показать содержимое папки. `-l` — детальный вывод.
- **cd <путь>**: сменить директорию. Требуется ровно один аргумент (например, `cd .` или `cd ..`).
- **cat <файл>**: показать содержимое файла.
- **cp <источник> <назначение>**: копировать файл.
- **mv <источник> <назначение>**: переместить/переименовать файл.
- **rm [-r] <путь>**: удалить файл/папку (`-r` — рекурсивно для каталогов).
- **zip <папка> <архив.zip>** / **unzip <архив.zip>**: архивировать/разархивировать zip.
- **tar <папка> <архив.tar.gz>** / **untar <архив.tar.gz>**: архивировать/разархивировать tar.gz.
- **grep <шаблон> <путь> [-r] [-i]**: поиск текста в файлах (`-r` — рекурсивно, `-i` — без учета регистра).
- **history [n]**: показать последние `n` команд (по умолчанию 10).
- **undo**: откатить последнюю операцию, которую можно отменить.
- **exit**: выйти из программы.

Примеры:
```bash
ls -l
cd ..
cat README.md
grep -r todo src
```

## История, undo и конфиг
- Файл истории задается константой `HISTORY_FILE` в `src/config.py` (по умолчанию `.history`).
- История и undo-стек инкапсулированы в простом менеджере в `src/history.py`. Снаружи доступны функции `add_to_history`, `show_history`, `add_to_undo_stack` и т.д.
- Логи пишутся в `src/shell.log` (см. `src/logger.py`). Формат простой, чтобы легко читать глазами.

## Тесты
Тесты написаны на pytest и лежат в `tests/commands`.

### Установка зависимостей для тестов
```bash
source .venv/bin/activate
pip install -r requirements.txt
```

### Запуск всех тестов
```bash
pytest -q
```

### Запуск конкретного файла/теста
```bash
pytest -q tests/commands/test_ls.py
pytest -q -k test_grep_in_file
```


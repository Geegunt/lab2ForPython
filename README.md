# Лабораторная работа 2 (уровень Medium)

## Введение
Проект — мини‑оболочка (командный интерпретатор) на Python. Она умеет выполнять базовые команды файловой системы (`ls`, `cd`, `cat`, `cp`, `mv`, `rm`), работать с архивами (`zip/unzip`, `tar/untar`), искать по файлам (`grep`), вести историю команд (`history`) и откатывать операции (`undo`).

## Структура проекта

 <pre>
    .
    ├── src/
    │   ├── __init__.py
    │   ├── main.py
    │   ├── exceptions.py
    │   ├── parser.py
    │   ├── config.py
    │   ├── history.py
    │   ├── logger.py
    │   └── commands/
    │       ├── __init__.py
    │       ├── ls.py
    │       ├── cd.py
    │       ├── cp.py
    │       ├── cat.py
    │       ├── rm.py
    │       ├── mv.py
    │       ├── tar_cmd.py
    │       ├── grep.py
    │       ├── zip_cmd.py
    │       └── undo.py
    ├── tests/
    │       ├── __init__.py
    │       └── commands/
    │           ├── __init__.py
    │           ├── test_cat.py
    │           ├── test_cd.py
    │           ├── test_cp.py
    │           ├── test_grep.py
    │           ├── test_ls.py
    │           ├── test_mv.py
    │           ├── test_parser_extensions.py
    │           ├── test_rm.py
    │           ├── test_tar_cmd.py
    │           ├── test_undo.py
    │           └── test_zip_cmd.py
    ├── pyproject.toml
    ├── requirements.txt
    └── uv.lock
 </pre>


## Как пользоваться
После запуска вы увидите приглашение вида `<текущая_папка>$`. Вводите команды как в терминале

### Доступные команды
- **ls [путь] [-l]**: показать содержимое папки. `-l` — детальный вывод
- **cd <путь>**: сменить директорию. Требуется ровно один аргумент (например, `cd .` или `cd ..`)
- **cat <файл>**: показать содержимое файла
- **cp <источник> <назначение>**: копировать файл
- **mv <источник> <назначение>**: переместить/переименовать файл
- **rm [-r] <путь>**: удалить файл/папку (`-r` — рекурсивно для каталогов)
- **zip <папка> <архив.zip>** / **unzip <архив.zip>**: архивировать/разархивировать zip
- **tar <папка> <архив.tar.gz>** / **untar <архив.tar.gz>**: архивировать/разархивировать tar.gz
- **grep <шаблон> <путь> [-r] [-i]**: поиск текста в файлах (`-r` — рекурсивно, `-i` — без учета регистра)
- **history [n]**: показать последние `n` команд (по умолчанию 10)
- **undo**: откатить последнюю операцию, которую можно отменить
- **exit**: выйти из программы

Примеры:
```bash
ls -l
cd ..
cat README.md
```

## История, undo и конфиг
- Файл истории задается константой `HISTORY_FILE` в `src/config.py` (по умолчанию `.history`)
- История команд: все команды сохраняются в файл `.history` в папке `src`. Команда `history` по умолчанию показывает последние 10 команд
- Стек отмены (undo): ограничен 10 последними операциями (cp, mv, rm). При превышении лимита самая старая операция удаляется
- История и undo-стек инкапсулированы в простом менеджере в `src/history.py`. Снаружи доступны функции `add_to_history`, `show_history`, `add_to_undo_stack` и т.д
- Логи пишутся в `src/shell.log` (см. `src/logger.py`). Формат простой, чтобы легко читать глазами

## Тесты
Тесты написаны на pytest и лежат в `tests/commands`
